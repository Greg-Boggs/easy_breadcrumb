<?php/** * Obtains the 'easy_breadcrumb' block * @return Assoc resulting renderizable array */function _easy_breadcrumb_block() {    $defaultClass = 'easy-breadcrumb_segment';  $classArr = array($defaultClass, 'easy-breadcrumb_segment-home');  $homeText = t('Home');  $breadcrumb = array();  $breadcrumb[] = l($homeText, null, array('attributes' => array('class' => $classArr)));  /** don't waste resources if the current page is the home * */  if (!drupal_is_front_page()) {    $uppercaseMode = variable_get(EasyBreadcrumbConstants::DB_VAR_SEGMENTS_TITLE_MODE, 'ucwords');    $url = drupal_get_path_alias();    $urlArr = explode('/', $url);    $segmentUrlArr = array();    $n = count($urlArr);    for ($c = 1, $i = 0; $c < $n; ++$c, ++$i) {      $item = $urlArr[$i];      $segmentUrlArr[] = $item;      $segmentUrl = implode('/', $segmentUrlArr);      $segmentTitle = _easy_breadcrumb_normalize_url_segment_text($item, $uppercaseMode);      $classArr[1] = 'easy-breadcrumb_segment-' . $c;      $breadcrumb[$c] = l($segmentTitle, $segmentUrl, array('attributes' => array('class' => $classArr)));    }    $titleVisible = variable_get(EasyBreadcrumbConstants::DB_VAR_TITLE_VISIBLE, true);    if ($titleVisible) {      $classArr[1] = 'easy-breadcrumb_segment-title';      $title = drupal_get_title();      // if the current page has not title, then extract it from the url      if (!isset($title) || $title === '') {        $title = $urlArr[$n - 1];        $title = _easy_breadcrumb_normalize_url_segment_text($title, $uppercaseMode);      }      $breadcrumb[$n] = l($title, $url, array('attributes' => array('class' => $classArr)));    }  }  $separator = variable_get(EasyBreadcrumbConstants::DB_VAR_SEGMENTS_SEPARATOR, '>>');  $build = array();  $build['easy_breadcrumb'] = array(      '#theme' => 'easy_breadcrumb',      '#breadcrumb' => $breadcrumb,      '#separator' => $separator  );  return $build;}/** * Normalizes an URL segment's title. e.g., transforms "about-us" into "About Us" or "About us" according menu's settings. * @param string $segment Segment's title to be normalized * @param string $uppercaseMode Specifies the uppercase transformation to be applied to the segment's title, if so. * @return string normalized segment title */function _easy_breadcrumb_normalize_url_segment_text($segment, $uppercaseMode = 'ucwords') {  $segment = str_replace('-', ' ', $segment);  switch ($uppercaseMode) {    case 'ucwords':      $segment = ucwords($segment);      break;    case 'ucfirst':      $segment = ucfirst($segment);      break;    default:  }  return $segment;}